<div [ngResizable]="data.resize" class="order-component p-2 pl-3 pr-3 rounded h-35 resizable-widget">
  <!-- <button (click)="openPopupModal()">openPopup</button> -->
  <!-- <ul class="header-button">
    <li><button type="button" class="btn btn-outline-primary" (click)="handleOpenCrossModal(leverageCrossModal)"
        style="color: rgb(255, 255, 255);background-color: rgb(44, 65, 66);border-color: transparent;padding-top: 2px;padding-bottom: 2px;">
        <span *ngIf="selectedLeverageMarginType == 2">CROSS</span>
        <span *ngIf="selectedLeverageMarginType == 1">ISO</span>
      </button></li>
    <li><button type="button" class="btn btn-outline-primary" (click)="handleOpenXModal(leverageXModal)"
        style="color: rgb(255, 255, 255);background-color: rgb(44, 65, 66);border-color: transparent;padding-top: 2px;padding-bottom: 2px;">{{selectedCrossRange}}</button>
    </li>
  </ul> -->

  <div class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Enter OTP Sent to your mail id</h4>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="exampleInputOTP">Enter OTP</label>
              <input type="text" class="form-control" id="exampleInputOTP" placeholder="Enter OTP"  />
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="orderBookDropdown">
    <ul class="nav navbar-nav">

      <li class="lidropdown" style="position: relative;right: -20px;">
        <span class="dropdown" style="position: static;"> 
        <a href="javascript:void(0);" style="font-size: 15px;"  [ngClass]="Themecolor == 'Dark' ? 'asset-font' : 'asset-font-light'" (click)="myFunction()"
          data-toggle="dropdown">{{this.assetPairName}} &nbsp;&nbsp;<i class="fa fa-angle-double-down"
            aria-hidden="true"></i></a>
        <ul [ngClass]="Themecolor == 'Dark' ? 'dropdown-menu menu-stl' : 'dropdown-menu-light menu-stl'" role="menu" id="myDropdown">
  

          <div class="upSearchbar" >
            <span class="filter-srch" style="display:contents;">
              <em class="em-serach" style="position:absolute;top:5% !important;"><i class="fa fa-search" aria-hidden="true"></i></em>
              <input type="input" placeholder="Search" (keyup)="filterItem($event.target.value)"
                [ngClass]="Themecolor == 'Dark' ? 'filterseacrh' : 'filterseacrh-light'" style="width: 96%">
            </span>
          </div>


          <div class="table-hight solid" id="asset-table">
            <!--  <button class="btn btn-dark font-xs filter-button asset-dtl-font btn-in" id="btc-btn"
              (click)="getNewCurrency('BTC')">BTC</button> 
            <button class="btn btn-dark font-xs filter-button asset-dtl-font btn-in" id="eth-btn" (click)="getNewCurrency('ETH')">ETH</button>
            <button class="btn btn-dark font-xs filter-button asset-dtl-font btn-in" id="hcx-btn" (click)="getNewCurrency('HCX')">HCX</button>
            <button class="btn btn-dark font-xs filter-button asset-dtl-font btn-in" id="usdt-btn" (click)="getNewCurrency('USDT')">USDT</button>
            <button class="btn btn-dark font-xs filter-button asset-dtl-font label-sz btn-in fiatcur" id="fiat-btn" (click)="getselectval()">FIAT</button> -->
            <button *ngFor="let c of header" [ngClass]="Themecolor == 'Dark' ? 'btn btn-dark font-xs filter-button asset-dtl-font btn-in' : 'btn btn-dark-light font-xs filter-button asset-dtl-font btn-in'" style="font-size: 18px !important;" id="btc-btn"
              (click)="getNewCurrency(c)">{{c}}</button>
  
            <!-- <span class="rap-select" >
              <label 
                class="btn btn-dark font-xs filter-button asset-dtl-font label-sz btn-in fiatcur" (click)="getselectval()">FIAT</label> -->
            <!--<select class="btn font-xs wrapselect"  id="selectval"
                (change)="getNewCurrency($event.target.value)">
                <option >ALL</option>
                <option>USD</option>
                <option>AED</option>
                <option>INR</option>
              </select>
            </span> -->
  
            <!-- <span class="filter-srch downSearchbar">
              <em class="em-serach"><i class="fa fa-search" aria-hidden="true"></i></em>
              <input type="input" placeholder="Search" (keyup)="filterItem($event.target.value)" [ngClass]="Themecolor == 'Dark' ? 'filterseacrh' : 'filterseacrh-light'">
            </span> -->
  
  
            <div class="row table-ht">
              <table class="table table-sm table-chart">
                <thead>
                  <tr class="bg-header text-head">
                    <th scope="col" class="text-left" style="font-size: 16px;"> Pair</th>
                    <th scope="col" class="text-center" style="font-size: 16px;">Last Price</th>
                    <th scope="col" class="text-right" style="font-size: 16px;">ROC</th>
                    <th scope="col" class="text-right" style="font-size: 16px;">Volume</th>
                  </tr>
                </thead>
                <tbody id="trade-assetpair">
                  <tr *ngFor="let m of assetetpairback">
                    <td class="asset-dtl-font font-weight-bold" style="color:white;"><a (click)="buySellCode(m)"
                        class="asset-dtl-font test-sanu text-center" style="font-size: 16px;" [ngStyle]="{color : Themecolor == 'Dark' ? 'white' : '#007bff'}"
                        href="javascript:void(0);"><img src="{{'./assets/img/currency/'+ m.currencycode+'.svg'}}"
                          width="17" style="padding-right: 5px;" alt="" />{{m.assetPairName}}</a></td>
                    <td class="text-white asset-dtl-font text-right" style="font-size: 16px;"><span style="color:beige;"
                        *ngIf="m.lpricecolor==null">{{m.lasttrade1}}</span><span style="color: rgb(255, 0, 122);"
                        *ngIf="m.lpricecolor==false">{{m.lasttrade1}}</span><span style="color: rgb(112,168, 0)"
                        *ngIf="m.lpricecolor==true">{{m.lasttrade1}}</span><span
                        style="color:rgb(161, 161, 159);font-size: 10px;"> /</span><span style="color:rgb(161, 161, 159);"
                        *ngIf="m.basecurrency=='INR'"> ₹ </span><span style="color:rgb(161, 161, 159);"
                        *ngIf="m.basecurrency =='USD' || m.basecurrency=='USDT'"> $ </span><span
                        style="color:rgb(161, 161, 159);">{{m.lasttrade2}} </span><span style="color:rgb(161, 161, 159);"
                        *ngIf="m.basecurrency=='AED'"> د.إ</span></td>
  
                    <td class="asset-dtl-font text-right roc-green" style="font-size: 16px;" *ngIf="m.RocColor == true">
                      {{m.roc|number : '.2-2'}}</td>
                    <td class="asset-dtl-font text-right roc-red" style="font-size: 16px;" *ngIf="m.RocColor != true">
                      {{m.roc|number : '.2-2'}}</td>
  
                    <td [ngClass]="Themecolor == 'Dark' ? 'text-white asset-dtl-font text-right' : 'text-black asset-dtl-font text-right'" style="font-size: 16px;">{{m.volume|number : '.2-2'}}
                    </td>
                  </tr>
                </tbody>
  
              </table>
  
  
            </div>
  
  
          </div>
        </ul>
       </span>
        </li>
        <li class="infoOrderBook" >
          <div class="icon-section pull-left">
            <i class="fa fa-info-circle" aria-hidden="true" (click)="data.handleInfoSection('orderbookInfo')" style="position:relative;left:80px;font-size:16px;z-index:99;"></i>
          </div>
          <div class="info-section" id="orderbookInfo" style="display: none;">
            <div class="info-header">
              <div class="info-title" style="font-size: 20px;"> Order Book</div>
              <div class="info-close">
                <i class="fa fa-times" aria-hidden="true" (click)="data.handleInfoSection('orderbookInfo')" style="font-size: 15px;"></i>
              </div>
            </div>
            <div class="info-body" style="font-size: 17px;">
              Sell offers are displayed on top in red color, and Buy offers are displayed at the bottom in green color. The right side of the order book is displaying the current 50 trades that took place in the market in the last 24 hours.
            </div>
          </div>
        </li>
    </ul>
  </div>
  


  <div class="tab-pane fade show active" id="orderbook" role="tabpanel" aria-labelledby="orderbook-tab">
    <div class="row">
      <div class="col-md-6 border-col order-gap">
        <div  [ngClass]="Themecolor == 'Dark' ? 'order-id table-responsive' : 'order-id-light table-responsive'">
          <div class="price-orderbook" style="padding-left: 8px;font-size: 15px;">Amount</div>
          <div class="price-orderbook1 text-center" style="padding-right: 20px;font-size: 15px;">Price</div>
          <div class="price-orderbook2" style="padding-top:3px;padding-right: 28px;font-size: 15px;">Total</div>
        </div>
        <div [ngClass]="Themecolor == 'Dark' ? 'cont tabe-responsive_left_sell' : 'cont tabe-responsive_left_sell_light'">
          <table class="table sell-orderbook table-sm" data-module="sticky-table">
            <thead>
              <tr class="bg-header">
              </tr>
            </thead>
            <tbody *ngIf="askdata !=''">
              <tr class="" (click)="data.fetchOrderPrice(getPrice(m))" style="cursor: pointer;" *ngFor="let m of askdata;let i = index;" [ngClass]="m.newly==true?'bg-flash-red':''">
                <td style="font-family:'Montserrat',sans-serif;padding-right: 8px;font-size: 15px;" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" class="text-right">
                  {{(getAmount(m)*getPrice(m)).toFixed(p)}}</td>
                <td style="font-family:'Montserrat',sans-serif;text-align: center;padding-left: 15px;color: #F5475D;font-size: 15px;" class="">
                  {{getPrice(m)}}</td>
                <td style="font-family:'Montserrat',sans-serif;padding-left: 8px;font-size: 15px;" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" class="text-left">{{getAmount(m)}}</td>
              </tr>
            </tbody>
            <tbody *ngIf="askdata ==''">
              <tr>
                <td>
                  No Data
                </td>

              </tr>
            </tbody>
          </table>
        </div>

        <div [ngClass]="Themecolor == 'Dark' ? 'sp-highlow' : 'sp-highlow-light'">
          <span [ngStyle]="{color : Themecolor == 'Dark' ? '#F1B900' : '#2b2a2a'}" *ngIf="data.selectedSellingAssetText=='INR'"> ₹ </span><span
          [ngStyle]="{color : Themecolor == 'Dark' ? '#F1B900' : '#2b2a2a'}"
            *ngIf="data.selectedSellingAssetText =='USD' || data.selectedSellingAssetText=='USDT'"> $ </span>
          <!-- <ng2-odometer [number]="ctpdata" [config]="{ format: '(,ddd).dddddd' }"></ng2-odometer> -->
          <span [ngStyle]="{color : Themecolor == 'Dark' ? '#F1B900' : '#2b2a2a'}">{{buySellDiff}}</span>
          <span [ngStyle]="{color : Themecolor == 'Dark' ? '#F1B900' : '#2b2a2a'}" *ngIf="data.selectedSellingAssetText=='AED'"> د.إ</span>
          <small class="font-sm ml-2" style="font-size:2px;color: #21CB80;" id="pricegreen" style="display: none"><i
              class="fa fa-arrow-up" style="font-size:12px;color: #21CB80;">24H H: {{highprice | currency:'':''}} </i>

          </small>

          <small class="font-sm ml-2" style="font-size:2px" id="pricered" style="display: none"><i
              class="fa fa-arrow-down" style="font-size:12px;color: #F5475D;">24H L: {{lowprice | currency:'':''}} </i>
          </small>

        </div>
        <div [ngClass]="Themecolor == 'Dark' ? 'table-responsive tabe-responsive_left_buy' : 'table-responsive tabe-responsive_left_buy_light'" >

          <table class="table table-sm mb-4">
            <thead>
              <tr class="">

              </tr>
            </thead>
            <tbody>
              <tr class="" *ngFor="let m of biddata ;let i = index;" [ngClass]="m.newly==true?'bg-flash-green':''" (click)="data.fetchOrderPrice(getPrice(m))" style="cursor: pointer;">
                <td style="font-family:'Montserrat',sans-serif;padding-left: 8px;font-size: 15px;" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" class="text-left">{{getAmount(m)}}</td>
                <td style="font-family:'Montserrat',sans-serif; text-align: center;padding-left: 15px;color: #21CB80;font-size: 15px;"
                  class="">{{getPrice(m)}}</td>
                <td style="font-family:'Montserrat',sans-serif;padding-right: 8px;font-size: 15px;" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" class="text-right">
                  {{(getAmount(m)*getPrice(m)).toFixed(p)}}</td>
              </tr>
            </tbody>
            <tbody *ngIf="biddata ==''">
              <tr>
                <td>
                  No Data
                </td>

              </tr>
            </tbody>
          </table>
        </div>

      </div>
      <div class="col-md-6" id="trade-details-tableContent">
        <div [ngClass]="Themecolor == 'Dark' ? 'table-responsive tabe-responsive_right' : 'table-responsive tabe-responsive_right_light'">
          <table class="table table-sm cust">
            <thead>
              <tr class="bg-header">
                <th align="center" style="text-align: left;font-size: 15px;" scope="col"> Time</th>
                <th align="center" style="text-align: center;font-size: 15px;" scope="col">Amount</th>
                <th align="center" style="text-align: center;font-size: 15px;" scope="col">Price</th>
              </tr>
            </thead>
            <tbody *ngIf="marketTradeRecords !=''">
              <tr class="" (click)="data.fetchOrderPrice(getPrice(m))" style="cursor: pointer;" *ngFor="let m of marketTradeRecords;let i = index;">
                <td *ngIf="m.side == 'BID';else tradegreenprice" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" [ngClass]="m.newbid==true?'bg-flash-green':''"
                  style="font-family:'Montserrat',sans-serif;font-size: 15px;text-align: left !important;" class="text-center">{{m.timestamp | date:'h:mm:ss '}}</td>
                <ng-template #tradegreenprice>
                  <td [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" [ngClass]="m.newask==true?'bg-flash-red':''" style="font-family:'Montserrat',sans-serif;font-size: 15px;text-align: left !important;"
                    class="text-center">{{m.timestamp | date:'h:mm:ss '}}</td>
                </ng-template>

                <td *ngIf="m.side == 'BID';else tradegreenamount" [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" [ngClass]="m.newbid==true?'bg-flash-green':''"
                  style="font-family:'Montserrat',sans-serif;font-size: 15px;" class="text-center">{{getTradeAmount(m)}}</td>
                <ng-template #tradegreenamount>
                  <td [ngClass]="Themecolor == 'Dark' ? '' : 'ticker-light'" [ngClass]="m.newask==true?'bg-flash-red':''" style="font-family:'Montserrat',sans-serif;font-size: 15px;"
                    class="text-center">{{getTradeAmount(m)}}</td>
                </ng-template>

                <td style="font-family:'Montserrat',sans-serif;color: #21CB80;font-size: 15px;" [ngClass]="m.newbid==true?'bg-flash-green':''"
                  *ngIf="m.side == 'BID'; else true_price" class="text-center">
                  {{getTradePrice(m)}}</td>
                <ng-template #true_price>
                  <td [ngClass]="m.newask==true?'bg-flash-red':''" style="font-family:'Montserrat',sans-serif;color: #F5475D;font-size: 15px;"
                    class="text-center">
                    {{getTradePrice(m)}}
                  </td>
                </ng-template>

              </tr>
            </tbody>
            <tbody id="marketTrade" *ngIf="marketTradeRecords ==''">
              <tr>
                <td>
                  No Data
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>


</div>
<div class="w-100 mt-2"></div>
<ng-template #leverageCrossModal let-modal>
  <div class="modal-header" style="background: #3D5085; color: #fff;">
    <h6 class="modal-title" id="modal-basic-title">{{selectedAssetForLeverage}} Margin Mode</h6>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" style="background: #3D5085; color: #fff;">
    <div class="row text-center">
      <div class="col-md-1"></div>
      <button type="button" class=" margin-btn  col-md-5 ml-2" (click)="handleSelectLeverageMarginType(2)">
        <i class="fa fa-check-circle" aria-hidden="true" *ngIf="selectedLeverageMarginType == 2"></i> Cross</button>
      <button type="button" class=" margin-btn  col-md-5 ml-2" (click)="handleSelectLeverageMarginType(1)">
        <i class="fa fa-check-circle" aria-hidden="true" *ngIf="selectedLeverageMarginType == 1"></i> Isolated</button>
      <div class="col-md-1"></div>
    </div>
    <div class="row mt-3 text-center">
      <p class="col-md-12" style="color:#fff">Switching the margin mode only apply it to the selected contract</p>
    </div>
    <div class="row">
      <div class="col-md-2"></div>
      <button class="confirm-btn col-md-8" (click)="modal.dismiss()"> Confirm</button>
      <div class="col-md-2"></div>
    </div>
    <div class="row mt-3 text-left">
      <p class="col-md-12" style="color: #fff;font-size: 19px;">What are Cross and Isolated modes?</p>
      <p class="col-md-12" style="color:#99AACE"><span style="color: #fff;font-size: 19px;">Cross Margin Mode : </span> All cross positions
        under the same margin asset share the same asset cross margin balance. in the event of liquidation, your assets
        full margin balance along with any remaining open positions under the asset may be forfeired.</p>
      <p class="col-md-12" style="color:#99AACE"><span style="color: #fff;font-size: 19px;">Isolated Margin Mode : </span> Manage your risk
        on individual positions by restricting the amount of margin allocated to each. If the margin ratio of a position
        reached 100% the position will be liquidated. Margin can be aded or removed to positions using this mode.</p>
    </div>

  </div>

</ng-template>
<ng-template #leverageXModal let-modal>
  <div class="modal-header" style="background: #3D5085; color: #fff;">
    <h4 class="modal-title" id="modal-basic-title">Adjust Leverage</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" style="background: #3D5085; color: #fff;">
    <form class="needs-validation" novalidate>
      <div class="form-row">
        <div class="col-md-12 mb-3">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text text-center mr-2" id="validationTooltipUsernamePrepend"
                (click)="toggleCrossRange(-1)" style="background: #616F8D;border: #616F8D;color: #fff;"><i class="fa fa-minus" aria-hidden="true" style="margin-left: 9px;"></i></span>
            </div>
            <input type="text" class="form-control" id="validationTooltipUsername"
              aria-describedby="validationTooltipUsernamePrepend" disabled [ngModel]="selectedCrossRange"
              name="selectedCrossRange" style="text-align: center;font-size: 25px;background: #616F8D;border: #616F8D;">
            <div class="input-group-append">
              <span class="input-group-text text-center ml-2" id="validationTooltipUsernamePrepend"
                (click)="toggleCrossRange(0)" style="background: #616F8D;border: #616F8D;color: #fff;"> <i class="fa fa-plus" aria-hidden="true" style="margin-left: 9px;"></i> </span>
            </div>
          </div>
        </div>
      </div>
    </form>
    <div class="row mt-3">
      <div class="col-md-12">
       
        <form class="row">
          <div class="col-md-2" style="text-align: right;margin: 10px 0 0 0;color: #fff;font-size: larger;">{{crossRange[0]}}</div>
          <div class="slider col-md-8">
            <input id="range" name="range" type="range" min="1" [max]="crossRange[crossRange.length-1].slice(0, -1)" steps="1"
            [ngModel]="selectedRangeSliderValue" name="selectedRangeSliderValue"
            (change)="handleRangeSliderValue($event.target.value)" />
          </div>
          <div class="col-md-2" style="margin: 10px 0 0 0;color: #fff;font-size: larger;">{{crossRange[crossRange.length-1]}}</div>
        </form>
        <div class="row mt-3">
          <div class="col-md-4"></div>
          <button class="col-md-4 confirm-btn" (click)="modal.dismiss()" > Confirm</button>
          <div class="col-md-4"></div>
        </div>
      </div>
    </div>
  </div>

</ng-template>

<ng-template #myModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">No Contracts Found</h4>
  </div>
  <div class="modal-body">
    <span class="text-center">Currently there are no contracts to display in Options market. Please check back later.</span>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-red" (click)="modal.close('Save click')">Close</button>
  </div>
</ng-template>





